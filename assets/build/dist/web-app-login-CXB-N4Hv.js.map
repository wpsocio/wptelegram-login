{"version":3,"file":"web-app-login-CXB-N4Hv.js","sources":["../../../../js/web-app-login/index.ts"],"sourcesContent":["import './types';\n\nwindow.Telegram.WebApp.ready();\n\nfunction getRedirectURL() {\n\tconst current_url = new URL(window.location.href);\n\tcurrent_url.hash = '';\n\tcurrent_url.searchParams.delete('action');\n\treturn current_url.toString();\n}\n\nfunction getLoginURL(auth_url: string, auth_data: string) {\n\tconst login_url = new URL(auth_url);\n\n\tif (!login_url.searchParams.has('redirect_to')) {\n\t\tlogin_url.searchParams.set('redirect_to', getRedirectURL());\n\t}\n\n\tconst initDataSearchParams = new URLSearchParams(auth_data);\n\n\tfor (const [key, value] of initDataSearchParams.entries()) {\n\t\tlogin_url.searchParams.set(key, value);\n\t}\n\n\treturn login_url.toString();\n}\n\nif (window.wptelegram_login?.web_app_data) {\n\t(({ is_user_logged_in, login_auth_url, confirm_login, i18n }, webApp) => {\n\t\tif (!is_user_logged_in && webApp.initData) {\n\t\t\tconst login = () => {\n\t\t\t\t// Redirect the user to login URL.\n\t\t\t\twindow.location.href = getLoginURL(login_auth_url, webApp.initData);\n\t\t\t};\n\t\t\tif (confirm_login) {\n\t\t\t\twebApp.showPopup(i18n.popup, (id) => {\n\t\t\t\t\tif (id === 'login') {\n\t\t\t\t\t\tlogin();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlogin();\n\t\t\t}\n\t\t}\n\t})(window.wptelegram_login?.web_app_data, window.Telegram.WebApp);\n}\n"],"names":["window","Telegram","WebApp","ready","getRedirectURL","current_url","URL","location","href","hash","searchParams","delete","toString","getLoginURL","auth_url","auth_data","login_url","has","set","initDataSearchParams","URLSearchParams","key","value","entries","wptelegram_login","web_app_data","is_user_logged_in","login_auth_url","confirm_login","i18n","webApp","initData","login","showPopup","popup","id"],"mappings":"AAEAA,OAAOC,SAASC,OAAOC,QAEvB,SAASC,GAAiB,CACzB,MAAMC,EAAc,IAAIC,IAAIN,OAAOO,SAASC,IAAI,EAChDH,OAAAA,EAAYI,KAAO,GACPC,EAAAA,aAAaC,OAAO,QAAQ,EACjCN,EAAYO,UACpB,CAEA,SAASC,EAAYC,EAAkBC,EAAmB,CACnDC,MAAAA,EAAY,IAAIV,IAAIQ,CAAQ,EAE7BE,EAAUN,aAAaO,IAAI,aAAa,GAC5CD,EAAUN,aAAaQ,IAAI,cAAed,EAAgB,CAAA,EAGrDe,MAAAA,EAAuB,IAAIC,gBAAgBL,CAAS,EAE1D,SAAW,CAACM,EAAKC,CAAK,IAAKH,EAAqBI,UACrCb,EAAAA,aAAaQ,IAAIG,EAAKC,CAAK,EAGtC,OAAON,EAAUJ,UAClB,CAvBAZ,IAAAA,EAAAA,GAyBIA,EAAAA,OAAOwB,mBAAPxB,MAAAA,EAAyByB,eAC3B,CAAC,CAAEC,kBAAAA,EAAmBC,eAAAA,EAAgBC,cAAAA,EAAeC,KAAAA,GAAQC,IAAW,CACpE,GAAA,CAACJ,GAAqBI,EAAOC,SAAU,CAC1C,MAAMC,EAAQA,IAAM,CAEnBhC,OAAOO,SAASC,KAAOK,EAAYc,EAAgBG,EAAOC,QAAQ,CAAA,EAE/DH,EACIK,EAAAA,UAAUJ,EAAKK,MAAeC,GAAA,CAChCA,IAAO,SACJH,GACP,CACA,EAEKA,GAER,CAAA,IACEhC,EAAAA,OAAOwB,mBAAPxB,YAAAA,EAAyByB,aAAczB,OAAOC,SAASC,MAAM"}