{"version":3,"file":"blocks-BPdGwv-F.js","sources":["../../../../js/blocks/telegram-login/useData.ts","../../../../js/blocks/telegram-login/Output.tsx","../../../../js/blocks/telegram-login/Edit.tsx","../../../../js/blocks/telegram-login/constants.ts","../../../../js/blocks/telegram-login/index.tsx"],"sourcesContent":["import { usePluginData } from '@wpsocio/services';\nimport type { WPTelegramLoginData } from './types';\n\nexport const useData = <\n\tK extends keyof WPTelegramLoginData | undefined = undefined,\n>(\n\tkey?: K,\n): K extends keyof WPTelegramLoginData\n\t? WPTelegramLoginData[K]\n\t: WPTelegramLoginData => {\n\treturn usePluginData('wptelegram_login', key);\n};\n","import type { BlockEditProps } from '@wordpress/blocks';\n\nimport type { TelegramLoginAtts } from './types';\nimport { useData } from './useData';\n\nexport const Output: React.FC<\n\tPick<BlockEditProps<TelegramLoginAtts>, 'attributes' | 'className'>\n> = ({ attributes, className }) => {\n\tconst assets = useData('assets');\n\tconst { button_style, show_user_photo, corner_radius } = attributes;\n\n\tlet button_width: string | undefined;\n\tif ('small' === button_style) {\n\t\tbutton_width = '100px';\n\t} else if ('medium' === button_style) {\n\t\tbutton_width = '150px';\n\t}\n\n\tlet avatar_width: string | undefined;\n\tif ('small' === button_style) {\n\t\tavatar_width = '20px';\n\t} else if ('medium' === button_style) {\n\t\tavatar_width = '30px';\n\t}\n\n\treturn (\n\t\t<div className={className}>\n\t\t\t<img\n\t\t\t\tsrc={assets.loginImageUrl}\n\t\t\t\tstyle={{ borderRadius: `${corner_radius}px`, width: button_width }}\n\t\t\t\talt=\"\"\n\t\t\t/>\n\t\t\t{show_user_photo ? (\n\t\t\t\t<img\n\t\t\t\t\tsrc={assets.loginAvatarUrl}\n\t\t\t\t\tstyle={{ width: avatar_width }}\n\t\t\t\t\talt=\"\"\n\t\t\t\t/>\n\t\t\t) : null}\n\t\t</div>\n\t);\n};\n","import { InspectorControls } from '@wordpress/block-editor';\nimport type { BlockEditProps } from '@wordpress/blocks';\nimport {\n\tPanelBody,\n\tRadioControl,\n\tSelectControl,\n\tTextControl,\n\tToggleControl,\n} from '@wordpress/components';\nimport { useCallback, useEffect } from '@wordpress/element';\n\nimport { __ } from '@wpsocio/i18n';\n\nimport { Output } from './Output';\nimport type { TelegramLoginAtts } from './types';\nimport { useData } from './useData';\n\nconst getButtonStyleOptions = () => [\n\t{ label: __('Large'), value: 'large' },\n\t{ label: __('Medium'), value: 'medium' },\n\t{ label: __('Small'), value: 'small' },\n];\n\nconst savedSettings = (window.wptelegram_login?.savedSettings ||\n\t{}) as TelegramLoginAtts;\n\nexport const Edit: React.FC<BlockEditProps<TelegramLoginAtts>> = ({\n\tattributes,\n\tsetAttributes,\n\tclassName,\n}) => {\n\tconst {\n\t\tbutton_style,\n\t\tshow_user_photo,\n\t\tcorner_radius,\n\t\tlang,\n\t\tshow_if_user_is,\n\t} = { ...savedSettings, ...attributes };\n\n\tuseEffect(() => {\n\t\tfor (const key in savedSettings) {\n\t\t\tif (!(key in attributes)) {\n\t\t\t\tsetAttributes({ [key]: savedSettings[key as keyof TelegramLoginAtts] });\n\t\t\t}\n\t\t}\n\t}, []);\n\n\tconst uiData = useData('uiData');\n\n\tconst onChangeButtonStyle = useCallback(\n\t\t(newStyle: string) => setAttributes({ button_style: newStyle }),\n\t\t[setAttributes],\n\t);\n\tconst onChangeShowUserPhoto = useCallback(\n\t\t(new_show_user_photo: boolean) =>\n\t\t\tsetAttributes({ show_user_photo: new_show_user_photo }),\n\t\t[setAttributes],\n\t);\n\tconst onChangeCornerRadius = useCallback(\n\t\t(newRadius: string) => setAttributes({ corner_radius: newRadius }),\n\t\t[setAttributes],\n\t);\n\tconst onChangeShowIfUserIs = useCallback(\n\t\t(value: string) => setAttributes({ show_if_user_is: value }),\n\t\t[setAttributes],\n\t);\n\n\tconst onChangeLang = useCallback(\n\t\t(value: string) => setAttributes({ lang: value }),\n\t\t[setAttributes],\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={__('Button Settings')}>\n\t\t\t\t\t<RadioControl\n\t\t\t\t\t\tlabel={__('Button Style')}\n\t\t\t\t\t\tselected={button_style}\n\t\t\t\t\t\tonChange={onChangeButtonStyle}\n\t\t\t\t\t\toptions={getButtonStyleOptions()}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('Show User Photo')}\n\t\t\t\t\t\tchecked={show_user_photo}\n\t\t\t\t\t\tonChange={onChangeShowUserPhoto}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={__('Corner Radius')}\n\t\t\t\t\t\tvalue={corner_radius || ''}\n\t\t\t\t\t\tonChange={onChangeCornerRadius}\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\tmax=\"20\"\n\t\t\t\t\t/>\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\tlabel={__('Language')}\n\t\t\t\t\t\tvalue={lang}\n\t\t\t\t\t\tonChange={onChangeLang}\n\t\t\t\t\t\toptions={uiData.lang}\n\t\t\t\t\t/>\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\tlabel={__('Show if user is')}\n\t\t\t\t\t\tvalue={show_if_user_is}\n\t\t\t\t\t\tonChange={onChangeShowIfUserIs}\n\t\t\t\t\t\toptions={uiData.show_if_user_is}\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<Output attributes={attributes} className={className} />\n\t\t</>\n\t);\n};\n","import type { Block } from '@wordpress/blocks';\n\nimport type { TelegramLoginAtts } from './types';\n\nexport const blockAttributesV0: Block<TelegramLoginAtts>['attributes'] = {\n\tbutton_style: {\n\t\ttype: 'string',\n\t\tdefault: 'large',\n\t},\n\tshow_user_photo: {\n\t\ttype: 'boolean',\n\t\tdefault: true,\n\t},\n\tcorner_radius: {\n\t\ttype: 'string',\n\t\tdefault: '20',\n\t},\n\tshow_if_user_is: {\n\t\ttype: 'string',\n\t\tdefault: '0',\n\t},\n};\n\nexport const blockAttributesV1: Block<TelegramLoginAtts>['attributes'] = {\n\tbutton_style: {\n\t\ttype: 'string',\n\t},\n\tshow_user_photo: {\n\t\ttype: 'boolean',\n\t},\n\tcorner_radius: {\n\t\ttype: 'string',\n\t},\n\tshow_if_user_is: {\n\t\ttype: 'string',\n\t},\n};\n\nexport const blockAttributesV2: Block<TelegramLoginAtts>['attributes'] = {\n\t...blockAttributesV1,\n\tlang: {\n\t\ttype: 'string',\n\t},\n};\n","import { registerBlockType } from '@wordpress/blocks';\n\nimport { __ } from '@wpsocio/i18n';\n\nimport { Edit } from './Edit';\nimport { Output } from './Output';\nimport {\n\tblockAttributesV0,\n\tblockAttributesV1,\n\tblockAttributesV2,\n} from './constants';\nimport type { TelegramLoginAtts } from './types';\n\nimport './style.scss';\n\nconst savedSettings = (window.wptelegram_login?.savedSettings ||\n\t{}) as TelegramLoginAtts;\n\nregisterBlockType<TelegramLoginAtts>('wptelegram/login', {\n\ttitle: __('WP Telegram Login'),\n\ticon: 'smartphone',\n\tcategory: 'wptelegram',\n\tattributes: blockAttributesV2,\n\tedit: Edit,\n\n\tsave(props) {\n\t\treturn <Output attributes={props.attributes} className=\"\" />;\n\t},\n\tdeprecated: [\n\t\t{\n\t\t\tattributes: blockAttributesV0,\n\t\t\tsave(props) {\n\t\t\t\treturn <Output attributes={props.attributes} className=\"\" />;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tattributes: blockAttributesV1,\n\t\t\tmigrate(attributes) {\n\t\t\t\treturn { ...savedSettings, ...attributes };\n\t\t\t},\n\t\t\tsave(props) {\n\t\t\t\treturn <Output attributes={props.attributes} className=\"\" />;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tattributes: blockAttributesV2,\n\t\t\tmigrate(attributes) {\n\t\t\t\treturn { ...savedSettings, ...attributes };\n\t\t\t},\n\t\t\tsave(props) {\n\t\t\t\treturn <Output attributes={props.attributes} className=\"\" />;\n\t\t\t},\n\t\t},\n\t],\n});\n"],"names":["useData","key","usePluginData","Output","attributes","assets","button_style","show_user_photo","corner_radius","button_width","avatar_width","className","getButtonStyleOptions","__","savedSettings","_a","Edit","setAttributes","lang","show_if_user_is","useEffect","uiData","onChangeButtonStyle","useCallback","newStyle","onChangeShowUserPhoto","new_show_user_photo","onChangeCornerRadius","newRadius","onChangeShowIfUserIs","value","onChangeLang","blockAttributesV0","type","default","blockAttributesV1","blockAttributesV2","registerBlockType","props"],"mappings":"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"}